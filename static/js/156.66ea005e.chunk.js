"use strict";(self.webpackChunkp5_churmd=self.webpackChunkp5_churmd||[]).push([[156],{9156:(t,i,s)=>{s.r(i),s.d(i,{default:()=>g});var e=s(5043),h=s(6454),o=s.n(h),n=s(6664),r=s(5173),p=s(6717);class c{constructor(t,i,s){this.p=t,this.width=i,this.height=s,this.time=0,this.grid=[];for(let e=0;e<i;e++)this.grid[e]=[];for(let e=0;e<i;e++)for(let t=0;t<s;t++)this.grid[e][t]=this.p.noise(e,t,this.t)}show(t,i){this.p.push();const s=t/this.width,e=i/this.height;for(let h=0;h<this.width;h++)for(let t=0;t<this.height;t++){const i=h*s,o=t*e;this.p.push();const n=e/2;this.p.translate(i+s/2,o+n),this.p.rotate(this.grid[h][t]*this.p.TWO_PI),this.p.colorMode(this.p.HSL,360);const r=this.p.degrees(this.grid[h][t]*this.p.TWO_PI),p=this.p.color(r,250,200);this.p.stroke(p),this.p.fill(p),this.p.line(0,0,n,0),this.p.triangle(n,0,n-e/10,-e/20,n-e/10,e/20),this.p.pop()}this.p.pop()}update(){this.time+=.001;for(let t=0;t<this.width;t++)for(let i=0;i<this.height;i++)this.grid[t][i]=this.p.noise(t,i,this.time)}flowVelocityFromPixelPosition(t,i,s){const e=this.p.map(t.x,0,i,0,this.width,!0),h=this.p.floor(e),n=this.p.map(t.y,0,s,0,this.height,!0),r=this.p.floor(n),c=this.getSurroundingAngles(h,r),l=(0,p.czq)(c)/c.length*this.p.TWO_PI;return o().Vector.fromAngle(l,1)}getSurroundingAngles(t,i){const s=[];return[[t-1,i-1],[t-1,i],[t-1,i+1],[t,i-1],[t,i],[t,i+1],[t+1,i-1],[t+1,0],[t+1,i+1]].forEach((t=>{if(t[0]>=0&&t[1]>=0&&t[0]<this.width&&t[1]<this.height){const i=this.grid[t[0]][t[1]];s.push(i)}})),s}}c.prototypes={p5Instance:(0,r.instanceOf)(o()),coveredPerc:r.number,resolution:r.number,delta:r.number};const l=c;class a{constructor(t,i,s){this.p=t,this.position=this.p.createVector(i,s),this.velocity=this.p.createVector(0,0)}show(){this.p.push(),this.p.circle(this.position.x,this.position.y,20),this.p.pop()}addVelocityAndMove(t){this.velocity=this.velocity.add(t),this.velocity.normalize(),this.position=this.position.add(this.velocity)}isOutOfBounds(t,i){return this.position.x<0||this.position.y<0||(this.position.x>t||this.position.y>i)}}a.prototypes={p5Instance:(0,r.instanceOf)(o()),x:r.number,y:r.number};const d=a;class u{constructor(t,i,s){this.p=t,this.flowField=new l(this.p,30,30),this.numParticles=200,this.particles=[];for(var e=0;e<this.numParticles;e++)this.createRandomParticle(i,s)}createRandomParticle(t,i){const s=this.p.random(t),e=this.p.random(i),h=new d(this.p,s,e);this.particles.push(h)}createParticleAtMouse(){const t=new d(this.p,this.p.mouseX,this.p.mouseY);this.particles.push(t)}show(t,i){this.p.push(),this.flowField.show(t,i),this.particles.forEach((t=>{t.show()})),this.p.pop()}update(t,i){this.flowField.update(),this.particles.forEach((s=>{const e=this.flowField.flowVelocityFromPixelPosition(s.position,t,i);s.addVelocityAndMove(e)})),this.particles=this.particles.filter((s=>!s.isOutOfBounds(t,i))),this.particles.length!==this.numParticles&&this.createParticleAtMouse(t,i),this.particles.length!==this.numParticles&&this.createRandomParticle(t,i)}}u.prototypes={p5Instance:(0,r.instanceOf)(o())};const w=u;var m=s(579);class f extends e.Component{constructor(t){super(t),this.sketch=t=>{let i;t.setup=()=>{const s=t.createCanvas(window.innerWidth,window.innerHeight);s.parent("canvas"),s.style("display","block"),i=new w(t,window.innerWidth,window.innerHeight)},t.draw=()=>{t.background(51),i.show(window.innerWidth,window.innerHeight),i.update(window.innerWidth,window.innerHeight)},t.windowResized=()=>{t.resizeCanvas(window.innerWidth,window.innerHeight)}},this.myRef=e.createRef()}componentDidMount(){this.myP5=new(o())(this.sketch,this.myRef.current)}componentWillUnmount(){document.getElementById("canvas").replaceChildren()}render(){return(0,m.jsx)("div",{ref:this.myRef,children:(0,m.jsx)(n.A,{id:"canvas"})})}}const g=f}}]);
//# sourceMappingURL=156.66ea005e.chunk.js.map